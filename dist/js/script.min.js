"use strict";window.addEventListener("DOMContentLoaded",(function(){const e=document.querySelectorAll(".form__item"),t=document.querySelectorAll(".form__item")[4],n=t.getElementsByTagName("select")[0],l=document.createElement("div"),o=document.createElement("div"),a=document.createElement("div"),i=document.createElement("div"),r=document.createElement("div"),d=document.createElement("div"),s=document.createElement("div"),c=document.createElement("div");let m=[];n.style.display="none",t.appendChild(l),t.appendChild(r),l.classList.add("select"),l.style.cssText="background-color: #ffff; display: flex; \n    justify-content: space-between; align-items: center;",l.appendChild(o),o.classList.add("select__text"),o.style.cssText="color: black; width: 50%;",l.appendChild(a),a.classList.add("select__arrow"),a.appendChild(i),i.classList.add("select__ico");let u=!0;function g(e,t,n,o){i.style.background=`url(${e}) center center/cover no-repeat`,r.style.display=t,l.style.borderBottomLeftRadius=n,l.style.borderBottomRightRadius=n,l.style.borderBottom=o}i.addEventListener("click",(function(e){return u=u?(g("img/arrow_up.png","block","0px","2px solid black"),!1):(g("img/arrow_down.png","none","",""),!0),u})),r.classList.add("option"),m=function(...e){for(let t in e)e[t].classList.add("option__item"),r.appendChild(e[t]),e[t].textContent="",0==t?e[t].textContent+="Молодой":1==t?e[t].textContent+="Старый":2==t&&(e[t].textContent+="Супер старый");return e}(d,s,c),r.addEventListener("click",(function(e){if(e.target&&e.target.classList.contains("option__item"))return function(){for(let e=0;e<m.length;e++)m[e].style.backgroundColor="white"}(),g("img/arrow_down.png","none","",""),e.target.style.backgroundColor="#7a956b",o.textContent=e.target.textContent,u=!0,u}));const p=document.getElementById("form"),f=document.getElementsByClassName("checkbox__input")[0],y=document.createElement("div");p.addEventListener("submit",(async function(t){t.preventDefault();if((()=>{const e=document.querySelectorAll("label"),t=document.querySelectorAll("#formName")[0],n=document.querySelectorAll("#formEmail")[0];for(let l=0;l<e.length;l++)return!e[l].classList.contains("error")&&""!=t.value&&""!=n.value})())if(f.checked){let e=new FormData(p);e.append("image",v.files[0]),p.classList.add("_sending");let t=await fetch("sendmail.php",{method:"POST",body:e});if(t.ok){let e=await t.json();alert(e.message),h.innerHTML="",p.reset(),p.classList.remove("_sending")}else alert("Ошибка"),p.classList.remove("_sending")}else n="Необходимо согласие",e[e.length-1].appendChild(y),y.classList.add("err"),y.style.cssText="margin-top: 5px; font-size: 12px;\n        color: red;",y.textContent=n;var n})),f.addEventListener("change",(function(e){this.checked&&(y.style.display="none")})),function(e){$(e).validate({rules:{name:{required:!0,minlength:2},email:{required:!0,email:!0}},messages:{name:{required:"Пожалуйста, введите своё имя",minlength:jQuery.validator.format("Введите хотя бы {0} символа!")},email:{required:"Пожалуйста, введите свою почту",email:"Неправильно введён адрес почты"}}})}(p);const v=document.getElementById("formImage"),h=document.getElementById("formPreview");v.addEventListener("change",()=>{!function(e){if(!["image/jpeg","image/png","image/jpg","image/gif"].includes(e.type))return alert("Разрешены только изображения"),void(v.value="");if(e.size>2097152)return void alert("Файл должен быть менее 2 МБ");let t=new FileReader;t.onload=function(e){h.innerHTML=`<img src="${e.target.result}" alt="photo">`},t.onerror=function(e){alert("Ошибка")},t.readAsDataURL(e)}(v.files[0])})}));